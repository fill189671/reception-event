# reception-event
online-only主催イベントの受付bot（Discord）  
新規サーバー参加者に名札をつけ、参加する卓を案内する。

## 動作の流れ
1. メンバーがサーバーに参加したら（25行目）
2. チャンネルを取得し（26・27行目）
3. 案内メンションを送信（28行目）
4. 何かメッセージが送信された時（31行目以降）
5. それが受付チャンネルなら（32行目）
6. 全卓分の（40行目）
7. 参加者名簿と照合し、一致する名前があったら（41行目）
8. 参加卓の役職を取得・付与し（これで参加卓のアンダーワークに書き込めるようになる）（42・44行目）
9. 受付完了のメッセージとアンダーワークチャンネルの案内をメンションする（45行目）

7-1. メッセージと参加者名簿が一致しない場合（46行目）  
7-2. もう一度入力してもらうようメンションする（47行目）

5-1. 受付チャンネル以外での発言には何もしない

## リスト：卓一覧（34～37行目）
環境変数に→{'name':'A卓','rl':'RL名','mem':['参加者','参加者','参加者'],'uw_ch':アンダーワークID（int）,'za_ch':雑談ID（int）}  
一卓分の辞書型がリストの一要素に格納される。毎回増やすのもダルいし、これごと環境変数に格納してしまうか……？
* 卓名 兼 PLに付与する役職名
* RL名
* 参加者名簿（Twitterアカウント。値にリストを格納）
* アンダーワークテキストチャンネルのID（int）
* 雑談テキストチャンネルのID（int）

## 環境変数
herokuのSetting→ConfigVarsから設定。
* DISCORD_BOT_TOKEN：botトークン
* DISCORD_CH_ID：受付チャンネルのID（サーバー管理者のみ取得可能）
* TABLE_（卓の番号やアルファベット）：卓情報
